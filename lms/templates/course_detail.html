{% extends 'base.html' %}
{% block title %}{{ course.title }} Â· LMS{% endblock %}

{% block content %}
  <!-- Hero -->
  <section class="course-hero" aria-labelledby="course-title">
    <div id="course-title" class="hero-title">{{ course.title }}</div>
    <div class="hero-sub">
      HTML, CSS, JavaScriptë¥¼ í™œìš©í•œ ì›¹ ê°œë°œ ê¸°ì´ˆë¥¼ í•™ìŠµí•©ë‹ˆë‹¤. ì‹¤ìŠµì„ í†µí•´ ë™ì ì¸ ì›¹ í˜ì´ì§€ë¥¼ ì œì‘í•˜ê³ , ìµœì‹  ì›¹ ê¸°ìˆ  íŠ¸ë Œë“œë¥¼ ìµí™ë‹ˆë‹¤.
    </div>
    <div class="hero-meta">
      <span>ğŸ‘©â€ğŸ« ê¹€êµìˆ˜</span>
      <span>ğŸ“… ì›”, ìˆ˜ 14:00-15:30</span>
      <span>ğŸ“š 3í•™ì </span>
    </div>
  </section>

  <!-- Tabs -->
  <nav class="tabs" aria-label="ê°•ì¢Œ íƒ­">
    <a class="tab {{ 'active' if tab == 'materials' else '' }}"
       href="{{ url_for('course_detail.detail', course_id=course.id, tab='materials') }}">ê°•ì˜ ìë£Œ</a>
    <a class="tab {{ 'active' if tab == 'assignments' else '' }}"
       href="{{ url_for('course_detail.detail', course_id=course.id, tab='assignments') }}">ê³¼ì œ</a>
    <a class="tab {{ 'active' if tab == 'notices' else '' }}"
       href="{{ url_for('course_detail.detail', course_id=course.id, tab='notices') }}">ê³µì§€ì‚¬í•­</a>
    <a class="tab {{ 'active' if tab == 'discussion' else '' }}"
       href="{{ url_for('course_detail.detail', course_id=course.id, tab='discussion') }}">í† ë¡ </a>
  </nav>

  <!-- Content -->
  <section class="card">
    {% if tab == 'materials' %}
      <div class="card-title">ê°•ì˜ ìë£Œ</div>
      <p class="muted">ì£¼ì°¨ë³„ ê°•ì˜ ì˜ìƒê³¼ ìë£Œë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>

      {% if materials and materials|length %}
        <ul class="list list-spread">
          {% for m in materials %}
            <li>
              <div class="left">
                <span class="bullet {{ 'video' if m.duration else 'task' }}"></span>
                <div>
                  <div class="list-title">
                    {% if m.week %}{{ m.week }}ì£¼ì°¨:{% endif %} {{ m.title }}
                  </div>
                  <div class="list-sub">
                    {% if m.duration %}ì¬ìƒì‹œê°„: {{ m.duration }}{% endif %}
                    {% if m.size %}{% if m.duration %} Â· {% endif %}íŒŒì¼í¬ê¸°: {{ m.size }}{% endif %}
                  </div>
                </div>
              </div>
              <div class="right">
                {% if m.download %}
                  <a class="btn-ghost" href="#" aria-label="{{ m.title }} ë‹¤ìš´ë¡œë“œ">ë‹¤ìš´ë¡œë“œ</a>
                {% else %}
                  <span class="chip">{{ m.status or 'ëŒ€ê¸°' }}</span>
                  <a class="btn-ghost" href="#" aria-label="{{ m.title }} ì¬ìƒ">ì¬ìƒ</a>
                {% endif %}
              </div>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted">ë“±ë¡ëœ ìë£Œê°€ ì—†ìŠµë‹ˆë‹¤.</div>
      {% endif %}

    {% elif tab == 'assignments' %}
      <div class="card-title">ê³¼ì œ</div>

      {% if assignments and assignments|length %}
        <ul class="list list-spread">
          {% for a in assignments %}
            {% set sub = sub_map.get(a.id) %}
            <li>
              <div class="left">
                <span class="bullet task"></span>
                <div>
                  <div class="list-title">{{ a.title }}</div>
                  <div class="list-sub">
                    ë§ˆê°:
                    {{ a.due_at|dt_kr if a.due_at else 'ë¯¸ì •' }}
                    Â· ìƒíƒœ:
                    {% if sub and sub.submitted_at %}<b>ì œì¶œ</b>{% else %}ë¯¸ì œì¶œ{% endif %}
                    {% if sub and sub.score is not none %} Â· ì ìˆ˜: {{ sub.score }}{% endif %}
                  </div>
                </div>
              </div>
              <div class="right">
                <a class="btn-primary"
                   href="{{ url_for('assignments.home') }}"
                   aria-label="{{ a.title }} ê³¼ì œ ë³´ê¸°">ê³¼ì œ ë³´ê¸°</a>
              </div>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted">ë“±ë¡ëœ ê³¼ì œê°€ ì—†ìŠµë‹ˆë‹¤.</div>
      {% endif %}

    {% elif tab == 'notices' %}
      <div class="card-title">ê³µì§€ì‚¬í•­</div>

      {% if notices and notices|length %}
        <ul class="list list-spread">
          {% for n in notices %}
            <li>
              <div class="left">
                <span class="bullet notice"></span>
                <div>
                  <div class="list-title">
                    {% if n.pin %}<span class="pin" aria-label="ìƒë‹¨ ê³ ì •">ğŸ“Œ</span>{% endif %}
                    {{ n.title }}
                  </div>
                  <div class="list-sub">{{ n.date }}</div>
                </div>
              </div>
              <div class="right">
                <a class="btn-ghost" href="#" aria-label="{{ n.title }} ìƒì„¸ ë³´ê¸°">ìƒì„¸</a>
              </div>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</div>
      {% endif %}

    {% elif tab == 'discussion' %}
      <div class="card-title">í† ë¡ </div>

      {% if discussion and discussion|length %}
        <ul class="list list-spread">
          {% for d in discussion %}
            <li>
              <div class="left">
                <span class="bullet discuss"></span>
                <div>
                  <div class="list-title">{{ d.title }}</div>
                  <div class="list-sub">ëŒ“ê¸€ {{ d.comments }} Â· {{ d.updated }}</div>
                </div>
              </div>
              <div class="right">
                <a class="btn-ghost" href="#" aria-label="{{ d.title }} í† ë¡  ì°¸ì—¬">ì°¸ì—¬</a>
              </div>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted">ì§„í–‰ ì¤‘ì¸ í† ë¡ ì´ ì—†ìŠµë‹ˆë‹¤.</div>
      {% endif %}
    {% endif %}
  </section>
{% endblock %}